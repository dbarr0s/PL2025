START
PUSHS "Introduza uma string binária:"
WRITES
WRITELN
READ
STOREG 0
PUSHG 0
STOREG 0
PUSHA BinToInt
CALL
PUSHG 1
STOREG 3
PUSHS "O valor inteiro correspondente é: "
WRITES
PUSHG 3
WRITEI
WRITELN
STOP

BinToInt:
PUSHI 0
STOREG 3
PUSHI 1
STOREG 4
PUSHG 0
STRLEN
STOREG 2
FOR0:
PUSHG 2
PUSHI 1
FSUPEQ
JZ ENDFOR0
IF0:
PUSHG 0
PUSHG 2
PUSHI 1
SUB
CHARAT
PUSHS "1"
CHRCODE
EQUAL
JZ ELSE0
PUSHG 3
PUSHG 4
ADD
STOREG 3
JUMP ENDIF0
ELSE0:
ENDIF0:
PUSHG 4
PUSHI 2
MUL
STOREG 4
PUSHG 2
PUSHI 1
SUB
STOREG 2
JUMP FOR0
ENDFOR0:
PUSHG 3
STOREG 1
RETURN

